@import "tailwindcss";

html {
  scroll-behavior: smooth;
}

/* iOS Safari viewport fixes */
@supports (height: 100dvh) {
  .h-screen-safe {
    height: 100dvh;
  }
  .min-h-screen-safe {
    min-height: 100dvh;
  }
}

@supports not (height: 100dvh) {
  .h-screen-safe {
    height: 100vh;
    height: -webkit-fill-available;
  }
  .min-h-screen-safe {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
}

/* iOS specific height fixes to prevent overlapping */
@media (max-width: 768px) {
  /* Allow content to breathe while preventing overlap */
  .h-screen-safe {
    min-height: 100vh !important;
    /* Remove max-height to allow content overflow when needed */
  }
  
  .min-h-screen-safe {
    min-height: 100vh !important;
  }
  
  /* Ensure sections don't overlap on iOS */
  section {
    position: relative;
    isolation: isolate;
    display: flex;
    flex-direction: column;
    z-index: 1;
    contain: layout style;
    padding-top: 2rem; /* Add top padding to prevent cutoff */
    padding-bottom: 2rem; /* Add bottom padding for spacing */
  }
  
  /* Stack sections properly */
  #hero { 
    z-index: 10; 
    padding-top: 4rem; /* Extra space for nucleus */
  }
  #projects { 
    z-index: 9;
    min-height: auto !important; /* Allow to expand for all apps */
    height: auto !important;
  }
  #about { z-index: 8; }
  #skills { z-index: 7; }
  #contact { z-index: 6; }
  
  /* Fix text overflow on iOS */
  #hero h1, #hero span, #hero p {
    max-width: 100% !important;
    word-wrap: break-word !important;
    line-height: 1.2 !important;
    /* Remove overflow: hidden to prevent content cutoff */
  }
  
  #projects h2, #projects span, #projects p {
    max-width: 100% !important;
    word-wrap: break-word !important;
    line-height: 1.3 !important;
    /* Remove overflow: hidden to prevent content cutoff */
  }
  
  /* Constrain text sizes on mobile */
  #hero h1 {
    font-size: 2.5rem !important; /* Much smaller on mobile */
  }
  
  #projects h2 {
    font-size: 2rem !important; /* Much smaller on mobile */
  }
  
  /* Ensure sections contain their content */
  section > div {
    max-width: 100% !important;
    /* Remove overflow: hidden to allow content to show */
  }
  
  /* Debug: add visible borders to see what's happening */
  #hero {
    border: 2px solid red !important;
    background: rgba(255, 0, 0, 0.1) !important;
  }
  
  #projects {
    border: 2px solid blue !important;
    background: rgba(0, 0, 255, 0.1) !important;
  }
}

/* iOS scroll behavior improvements */
@media (max-width: 768px) {
  * {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Scroll snap is now handled via responsive classes in HTML */
  
  /* Better touch handling */
  button, a, [role="button"] {
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  
  /* Improved text rendering on iOS */
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
  }
  
  /* Ensure minimum font sizes for readability */
  .text-xs { font-size: 0.75rem; }
  .text-sm { font-size: 0.875rem; }
  .text-base { font-size: 1rem; }
  .text-lg { font-size: 1.125rem; }
}

:root {
  --accent: #00D4FF;
}

@theme inline {
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

html { color-scheme: dark; }
body { background-color: #0A0B10; color: #E6E7EB; }

/* Selection */
::selection { background: rgba(0,212,255,0.2); color: rgba(186,243,255,0.95); }

.noise::before { content: ""; position: absolute; inset: 0; pointer-events: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' opacity='0.05'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E"); }

/* Constellation overlay tames orbits */
.constellation-open [data-orb] { transition: transform .2s ease-out; }

/* Subtle aura pulse */
@keyframes aura { 0%,100%{ box-shadow: 0 0 40px rgba(34,211,238,.18);} 50%{ box-shadow: 0 0 80px rgba(34,211,238,.25);} }
.pulse-aura { animation: aura 6s ease-in-out infinite; }

/* Reduce animations on mobile and for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

@media (max-width: 768px) {
  /* Reduce particle animations on mobile for better performance */
  [class*="animate-"] {
    animation-duration: 1s;
  }
}
